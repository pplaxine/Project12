<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta th:insert="fragments/head :: head"/>
		<title>Product Batch List</title>
	</head>
	<body>
		<header th:replace="fragments/header :: header"></header>
		<div class="bg_home_long">

			<div class="container pt-5">
				
				<h1 class="text-light pb-3">Products in stock</h1>
				<div th:if="${error}" th:text="${error}" class="text-danger"></div>
				
				<h5 class="pl-4 text-success">Available for redistribution</h5>
				<table class="table table-dark mt-3" style="opacity:0.8">
					<thead>
					  <tr>
					    <th scope="col"></th>
					    <th scope="col">To be used by</th>
					    <th scope="col">Product</th>
					    <th scope="col">Description</th>
						<th scope="col">Quantity</th>
						<th scope="col">Received on</th>
					  </tr>
					</thead>
					<tbody>
						<tr th:each=" productBatch : ${productBatchBeanDtoActiveList}">  
							<span th:if="${productBatch.isAwaitingForCollection != true}">
								<th scope="row"></th>
								<td th:text="${productBatch.toBeUsedBy}" class="align-middle"></td>
								<td th:text="${productBatch.name}" class="align-middle"></td>
								<td th:text="${productBatch.description}" class="align-middle"></td>
								<td>
									<span th:text="${productBatch.quantity}"></span>
									<span th:text="${productBatch.unitOfMeasure}"></span>
								</td>
								<td th:text="${productBatch.dateOfCollection}" class="align-middle"></td>
							</span>
						</tr> 
					</tbody>
				</table>
					
				<h5 class="pl-4 pt-5 text-success">Awaiting for validation / to be collected</h5>
				<table class="table table-dark mt-3" style="opacity:0.8">
					<thead>
					  <tr>
					    <th scope="col"></th>
					    <th scope="col">Batch id</th>
					    <th scope="col">Product</th>
					    <th scope="col">Description</th>
					    <th scope="col">Quantity</th>
				
					  </tr>
					</thead>
					<tbody>
						<tr th:each=" productBatch : ${ productBatchBeanDtoActiveList}">  
							<span th:if="${productBatch.isAwaitingForCollection == true}">
								<th scope="row"></th>
								<td th:text="${productBatch.id}" class="align-middle"></td>
								<td th:text="${productBatch.name}" class="align-middle"></td>
								<td th:text="${productBatch.description}" class="align-middle"></td>
								<td class="align-middle">
									<span th:text="${productBatch.quantity}"></span>
									<span th:text="${productBatch.unitOfMeasure}"></span>
								</td>
								
								<td class="align-middle"><a th:href="@{|/pme/product-batch/collect/${productBatch.id}|}">collected</a></td>
							</span>
						</tr> 
					</tbody>
				</table>
							
			</div>
		</div>
	</body>
</html>